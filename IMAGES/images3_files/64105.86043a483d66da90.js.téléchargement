"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64105],{20209:(e,t,r)=>{r.d(t,{$:()=>d});var a=r(924247),o=r(910163),s=r(513800),n=r(854898),i=r(600538);let d=({queryParams:e={},shouldFetch:t=!0}={})=>{let r=(0,a.uy)({queryParams:e}).formattedUrl;return(0,i.I)((0,o.Rt)({enabled:t,queryKey:["getUserPaymentProfiles",r],queryFn:()=>s.Bn.get(r).then(e=>(0,n.A)(e.data))}))}},321155:(e,t,r)=>{r.d(t,{NM:()=>k,fS:()=>O,Z5:()=>b});var a=r(924247),o=r(36073),s=r(680904),n=r(242548),i=r(513006),d=r(381532),u=r(28071),l=r(213370),c=r(977474);let m=(e,t=!1)=>{let r,[a]=e,{media:o,...n}=a,i=o?.[0]||{};switch(i.type){case u.W1:r=`${s.lcL}-var-0004`;break;case u.FY:r=c.eJ;break;case u.M9:r=c.Xs;break;case u.G_:r=s.t8m[i.size],t&&(r=s.fV_);break;default:return e}return[{...n,media:[]},{product:{id:r,type:l.Uy},media:[i]}]};var p=r(732580),y=r(639566);let f=()=>(0,y.l)(p.ju[s.uyi]);var h=r(678540),g=r(513800),C=r(854898);let N="production"!==r(541503).env.NODE_CONFIG_ENV,w=e=>{switch(e.paymentMethod){case o.L2:return{paymentId:e.id,expirationMonth:e?.creditCard?.expMonth,expirationYear:e?.creditCard?.expYear,maskedNumber:e?.creditCard?.maskedNumber,cardType:e?.creditCard?.type,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case o.RD:return{paymentId:e.id,bic:e?.sepaDirectDebit?.bic,maskedIBAN:e?.sepaDirectDebit?.maskedIban,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case o.ON:return{paymentId:e.id,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit,email:e.email};default:return null}},b=({paymentProfiles:e=[]})=>Array.isArray(e)&&0!==e.length?w(e.find(e=>!0===e.isDefault)||e[0]):null,v=({orderItems:e=[],license:t,country:r="",debitableIdentifier:a,selectedShadowsOption:c,isClickToCancelARGateEnabled:m=!1})=>e.map(e=>{let{product:{id:p,eligibleForRebilling:y,seatCount:f,name:g=""}={},productType:C,assets:N,paymentMethod:w,subscriptionIdentifier:b,cancellationReason:v,cancellationReasonName:P}=e,O=b&&v?{subscription_identifier:b,cancellation_reason:v,...P&&{cancellation_reason_name:P}}:{},_=[];return f&&(O.seat_count=f),w?.type!==o.gU&&(O.subscription_id=w?.id),N?.length&&(_=N.map(({asset:e,selectedAssetSize:r})=>{let a=(0,h.Ub)(e),o=(0,h.OJ)(e);return{type:a,id:e.id,license:t,...o&&{format:d.mx,size:d.mx,headline:e.title},...r?.size&&{size:r.size},...r?.format&&{format:r.format},...a===u.W1&&e.imageType===u.m$&&{angle:e.angle||n.R,content_provider:u._Y,...r?.format!==i.yC&&{include_shadows:"on"===(c||"on").toLocaleLowerCase()}}}})),O.auto_renewal=y&&C===l.PZ&&!s.F7K.includes(r)&&!s.KGB.includes(g),s.MA.includes(g)&&(O.auto_renewal=C===l.PZ&&!s.F7K.includes(r)),O.debitable_identifier=a,m&&s.Khw.includes(g)&&(O.auto_refill=!1),{product:{id:p,type:C||l.Uy},..._&&{media:_},...Object.keys(O).length>0&&{meta:O}}}),P=({currency:e,country:t,paymentProfileId:r,items:a,couponCode:o,vatNumber:s,promotions:n})=>({data:{type:"orders",attributes:{currency:e,items:a,country:t,payment_profile_id:r,coupons:o?[{type:"coupon",name:"coupon",coupon_code:o}]:[],client_data:{},vat_override:s||void 0,...n&&{promotions:n}}}}),O=async({country:e,couponCode:t,currency:r,orderItems:o=[],selectedShadowsOption:s,paymentProfileId:n,vatNumber:i,configs:d={},license:u=l.sU,debitableIdentifier:c,promotions:p,isEligibleForUnlimitedBogoPromotion:y=!1,isClickToCancelARGateEnabled:h=!1,isFootageSelect:w=!1})=>{let b=v({orderItems:o,license:u,country:e,debitableIdentifier:c,selectedShadowsOption:s,isClickToCancelARGateEnabled:h});y&&(b=m(b,w));let O=(0,a._u)().formattedUrl,_=P({country:e,couponCode:t,promotions:y?f():p,currency:r,items:b,paymentProfileId:n,vatNumber:i});return g.Bn.post(O,_,{...d,...N&&{timeout:3e4}}).then(e=>({headers:e.headers,data:(0,C.A)(e.data)}))},_=({orderItems:e=[],country:t="",debitableIdentifier:r})=>e.map(e=>{let{product:{id:a,license:n,name:i="",productType:u,eligibleForRebilling:c,seatCount:m}={},assets:p,paymentMethod:y}=e,f={...m&&{seat_count:m},...y?.type!==o.gU&&{subscription_id:y?.id}},g=[];return p?.length&&(g=p.map(({asset:e,selectedAssetSize:t})=>{let r=(0,h.OJ)(e);return{type:(0,h._$)(e),id:e.id,license:n,...r&&{format:d.mx,size:d.mx,headline:e.title},...t?.size&&{size:t.size},...t?.format&&{format:t.format}}})),f.auto_renewal=c&&u===l.PZ&&!s.F7K.includes(t)&&!s.KGB.includes(i),f.debitable_identifier=r,{product:{id:a,type:u||l.Uy},...g&&{media:g},...Object.keys(f).length>0&&{meta:f}}}),k=async({country:e,currency:t,orderItems:r,paymentProfileId:o,vatNumber:s,configs:n={},debitableIdentifier:i,promotions:d})=>{let u=_({orderItems:r,country:e,debitableIdentifier:i}),l=(0,a._u)().formattedUrl,c=P({country:e,currency:t,items:u,paymentProfileId:o,vatNumber:s,promotions:d}),m=await g.Bn.post(l,c,{...n,...N&&{timeout:3e4}});return{headers:m.headers,data:(0,C.A)(m.data)}}},428507:(e,t,r)=>{r.d(t,{kN:()=>u,h6:()=>p,$w:()=>m,Cw:()=>c});var a=r(424629),o=r(467889);let s=(e,t)=>(0,o.y)()(r=>({...e,analytics:{...t},actions:{setStates:e=>r(t=>({...t,...e})),setState:(e,t)=>r(r=>({...r,[e]:t}))}}));var n=r(330633),i=r(565317);let d=(0,n.createContext)(null),u=e=>{let{children:t,initialState:r,analytics:o}=e,[i]=(0,n.useState)(()=>s(r,o));return(0,a.jsx)(d.Provider,{value:i,children:t})},l=e=>{let t=(0,n.useContext)(d);if(!t)throw Error("useConversionPanelStore must be used within CounterStoreProvider");return(0,i.P)(t,e)},c=e=>l(t=>t[e]),m=()=>l(e=>e.analytics?.planViewed),p=()=>l(e=>e.actions)},438704:(e,t,r)=>{r.d(t,{JA:()=>f,Up:()=>p,Z0:()=>y,bV:()=>g,eb:()=>h,kI:()=>m,wb:()=>l});var a=r(398661),o=r(737578),s=r(188808),n=r(991418),i=r(65776),d=r(222851),u=r(330633);let l=({prices:e,forceLocaleCurrency:t})=>{let{currencyData:{currency:r=a.OS}}=(0,n.Y)();return(0,i.zn)({prices:e,localeCurrency:r,forceLocaleCurrency:t})},c=({basePrice:e,pricePerSeat:t,seatCount:r})=>e?e+t*r:NaN,m=({product:e})=>{let{prices:t={},pricesPerSeat:r={},seatCount:a,downloadCredits:o,allotmentCredits:s,commitmentLength:n}=e,i=l({prices:t}),u=t[i?.toLowerCase()]??NaN,m=r[i?.toLowerCase()]??NaN,p=u,y=s||o;return m&&a&&(p=c({basePrice:u,pricePerSeat:m,seatCount:a})),(0,d.f)(p/(y&&1===n?12*y:y||1),i)??void 0},p=({product:e,promotion:t=0,getAnnualPriceDividedByMonth:r=!1})=>{let{prices:a={},pricesPerSeat:o={},seatCount:s}=e||{},n=l({prices:a}),u=a[n?.toLowerCase()]??NaN,m=o[n?.toLowerCase()],p=u;return t>0&&(p=Math.round(u*(1-t))),r&&(0,i.Fj)({product:e||{}})&&(p=Math.ceil(Number(a[n?.toLowerCase()]??NaN)/12*100)/100),m&&s&&(p=c({basePrice:u,pricePerSeat:m,seatCount:s})),(0,d.f)(p,n)},y=({activeTab:e,productGroup:t,productToCompare:r=s.XN})=>{let{prices:a}={prices:{}},o=l({prices:a}),{products:n={}}=t,i=n[e],u=12*(i?.[r]?.prices?.[o?.toLowerCase()]??NaN)-(i?.[s.Ww]?.prices?.[o?.toLowerCase()]??NaN),c=(0,d.f)(u,o);return u>0?c:null},f=({product:e,downloadsPerMonth:t,discountPercentage:r=0,selectedProductLicenseType:a=""})=>{let s=l({prices:e?.prices??{}}),{pricePerPaymentInterval:n,pricePerMonth:c,pricePerAsset:m,pricePerAssetDiscounted:p,priceDiscounted:y}=(0,u.useMemo)(()=>{let n=(0,i.f8)({product:e??{}}),d=(0,i.Eu)({product:e}),u=a===o.ZI1,l=2*!["KRW","JPY"].includes(s),c=(0,i.Fj)({product:e??{}}),m=c&&!d?12:1,p=e?.prices?.[s.toLowerCase()]??NaN,y=p-p/100*r,f=c?(p/12).toFixed(l):p,h=u?(e?.allotmentCredits||0)/20:e?.allotmentCredits??NaN,g=(p/m/((n?h:e?.allotmentCredits)??NaN)).toFixed(l),C=r?(y/m/(e?.allotmentCredits??t??NaN)).toFixed(l):g;return{priceDiscounted:y,pricePerMonth:f,pricePerAsset:g,pricePerAssetDiscounted:C,pricePerPaymentInterval:p}},[s,t,e,r,a]);return{pricePerAsset:m,formattedPricePerPaymentInterval:(0,d.f)(n,s),formattedPricePerMonth:(0,d.f)(c,s),formattedPricePerAsset:(0,d.f)(m,s),formattedPricePerAssetDiscounted:(0,d.f)(p,s),formattedPriceDiscounted:(0,d.f)(y,s)}},h=({product:e,singleClipProduct:t})=>{let{prices:r,allotmentCredits:a}=e,o=l({prices:r}),s=r[o.toLowerCase()]??NaN,n=t?.prices?.[o.toLowerCase()]??NaN,i=(s/(a??NaN)).toFixed(2),u=((n-parseFloat(i))*(a??NaN)).toFixed(0);return{formattedPackagePrice:(0,d.f)(s,o),formattedPricePerAsset:(0,d.f)(i,o),formattedSaveAmount:(0,d.f)(u,o)}},g=({prices:e={},commitmentRemaining:t=0})=>{let r=l({prices:e}),a=e[r?.toLowerCase()]??NaN;return{monthlyPrice:(0,d.f)(a,r),totalRemainingPrice:(0,d.f)(a*t,r)}}},466809:(e,t,r)=>{r.d(t,{N:()=>n});var a=r(680904),o=r(439001);let s=[{condition:({assets:e,checkGate:t})=>(e?.some(({product:e})=>e?.name===a.rVp)??!1)&&(t?.(o.gx)??!1)},{condition:({product:e,checkGate:t})=>e?.name===a.rVp&&(t?.(o.gx)??!1)},{condition:({product:e})=>!!e?.promotions}],n=({assets:e,product:t,checkGate:r})=>s.some(a=>a.condition({assets:e,product:t,checkGate:r}))},639566:(e,t,r)=>{r.d(t,{l:()=>o});var a=r(607010).Buffer;let o=e=>{let t=JSON.stringify(e);return a.from(t).toString("base64")}},656740:(e,t,r)=>{r.d(t,{X:()=>v});var a=r(341573),o=r(439001),s=r(50432),n=r(213370),i=r(991418),d=r(232885),u=r(321155),l=r(65776),c=r(678540),m=r(762705),p=r(438704),y=r(727973),f=r(712542),h=r(648903),g=r(330633);let C=({asset:e,assetSize:t,couponCode:r,license:C,products:N,productId:w,productOverride:b,productType:v=n.PZ,setCreateOrderStatus:P,setIsInvalidCoupon:O,forceLocaleCurrency:_=!1})=>{let{region:k}=(0,i.Y)(),A=(0,f.o)(),[I,E]=(0,g.useState)(!1),M=(0,g.useMemo)(()=>b??{...(0,l.eO)(N,w)},[b,w,N]),x=(0,p.wb)({prices:M?.prices??{},forceLocaleCurrency:_}),{checkGate:U}=(0,h.U)(),S=U(o.M5),D=(0,g.useCallback)(e=>{let t={component:"useCreateAnonymousOrder.ts",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateAnonymousOrder",errorTitle:e.title,msg:"CON-21: Anonymous order creation failed",referrerPath:window.location.pathname,referrerQuery:window.location.search,anonymousId:A};window.NREUM?.noticeError?.(e,t)},[A]),F=(0,m.J)({couponCode:r}),L=(0,y.h)(),[R,z]=(0,g.useState)({status:"",error:void 0});return{createOrderHandler:(0,g.useCallback)(async()=>{try{P?.({status:"",error:void 0}),z({status:"",error:void 0}),E(!0);let o=e?{assets:[{asset:e,selectedAssetSize:(0,d.aZ)({assetType:(0,c.f0)(e),assetSize:t})}]}:{},n=[];n.push({...o,product:M,productType:v});let{data:i}=await (0,u.fS)({country:k,currency:x,orderItems:n,couponCode:r,license:C,isClickToCancelARGateEnabled:S,configs:{headers:{[s.DF]:A,[s.s4]:s.o}}});P?.({status:a.qO,error:void 0}),z({status:a.qO,error:void 0}),E(!1),F({orderId:`shutterstock.${i.id}`}),L({actionName:"CON-64 - anonymous order creation success",customAttributes:{productName:M.name,productType:v,country:k,currency:x,assetType:(0,c.f0)(e),assetSize:t,license:C}}),E(!1)}catch(e){P?.({status:a.Nz,error:e}),z({status:a.Nz,error:e}),E(!1),e?.detail?.toLowerCase()===n.s_&&O?.(!0),D(e)}},[A,e,t,r,k,x,S,C,M,v,L,F,D,P,O]),isCreateOrderInProgress:I,product:M,orderStatus:R}};var N=r(466809),w=r(712633),b=r(733571);let v=e=>{let{assets:t=[],cartItemsCount:r,isCartOrder:a,...o}=e,s=(0,w.i9)(),{checkGate:n}=(0,h.U)(),i=(0,N.N)({assets:a?t:void 0,product:a?void 0:o.productOverride,checkGate:n}),d=r&&r>15,u=(0,g.useMemo)(()=>({...o,asset:t[0]?.mediaItem||o.asset}),[o,t]),l=(0,b.s)(u),c=C(u),m=l.isCreateOrderInProgress||c.isCreateOrderInProgress||e.standardMultiOrderHookResult?.isCreateOrderInProgress||e.anonymousMultiOrderHookResult?.isCreateOrderInProgress,p=(0,g.useCallback)(({isEligibleForAnonCheckout:t})=>s||!t?a?e.standardMultiOrderHookResult:l:a?d||i?e.standardMultiOrderHookResult:e.anonymousMultiOrderHookResult:i?l:c,[s,a,i,c,l,d,e.anonymousMultiOrderHookResult,e.standardMultiOrderHookResult]);return{getCreateOrderHandler:(0,g.useCallback)(({isEligibleForAnonCheckout:e=!1})=>({createOrderHandler:p({isEligibleForAnonCheckout:e}).createOrderHandler}),[p]),isCreateOrderInProgress:m,hasActivePromos:i,cartSizeExceedsAnonymousLimit:d,createOrderHandlerLoading:l.createOrderHandlerLoading,orderStatus:l?.orderStatus?.status||c?.orderStatus?.status}}},729727:(e,t,r)=>{r.d(t,{o:()=>u});var a=r(193581),o=r(498590),s=r(332546),n=r(648903),i=r(946887),d=r(330633);let u=({disableEntryPoint:e=!0}={})=>{let{getExperiment:t}=(0,n.U)(),{anonymousId:r}=(0,s.pn)();return(0,d.useCallback)(()=>{let s=i.A.get(a.g_),n=i.A.get("accts_customer_sso1"),d=i.A.get("shared");return n||d||!s||s!==r?void window.NREUM?.addPageAction("FAE-1531 exclude users how might have existing products but havent logged in",{anonymousIdDataLayer:r,anonymousIdCookie:s,wasLoggedIn:n,wasLikelyToGetKickedOut:d,hasAccountSharedBefore:!!d}):(t(o.f.aaOnCheckout),e)?{isEligibleForCon64AnonymousCheckoutExperiment:"control"}:void t(o.f.aaOnCheckoutDisabledEntryPoint)},[r,t,e])}},733571:(e,t,r)=>{r.d(t,{s:()=>Z});var a=r(680904),o=r(341573),s=r(193581),n=r(439001),i=r(50432),d=r(732580),u=r(213370),l=r(991418),c=r(232885),m=r(321155),p=r(65776),y=r(762364),f=r(678540),h=r(796955),g=r(712633);let C=({asset:e,productName:t,isBogoPromotionActive:r=!1})=>{let o=(0,h.J)(),s=(0,g.i9)(),n=(0,f.sY)(e);return(o?.isFBA||!s)&&!n&&r&&t===a.uyi};var N=r(639566),w=r(637758),b=r(319305),v=r(20209),P=r(762705),O=r(438704),_=r(946267),k=r(288829),A=r(727973),I=r(712542),E=r(559413),M=r(332546),x=r(343270),U=r(648903),S=r(647588);let{NODE_CONFIG_ENV:D}=r(541503).env,F=()=>{let e=(0,S.NF)()?"production":"qa";switch(D||e){case"dev":return"65021";case"qa":return"12424";case"production":return"14156";default:return"NO_ENV_DEFINED"}};var L=r(863735),R=r(946887),z=r(859478),H=r(330633);let Z=({products:e,asset:t,assetSize:r,couponCode:h,productId:S,productType:D=u.PZ,productOverride:Z,seatCount:T,setCreateOrderStatus:B,setIsInvalidCoupon:V,vatNumber:j,license:Y,isLicenseDrawer:J=!1,preset:q,eligibilityData:K={},existingUserRedirectPath:$,selectedShadowsOption:G,shouldForceAsset:W=!1,subscriptionIdentifier:X,cancellationReason:Q,additionalCheckoutQueryParams:ee,orderFlow:et,checkoutAction:er,forceLocaleCurrency:ea=!1})=>{let{region:eo}=(0,l.Y)(),{isIndiaRegion:es}=(0,k.Z)(),{data:en}=(0,g.rA)(),{data:ei}=(0,E.J)(),ed=(0,g.i9)(),eu=(0,I.o)(),[el,ec]=(0,H.useState)(!1),[,em]=(0,x.p)(t)||[],{eligibilityCurrency:ep,debitableIdentifier:ey}=K,ef=(0,M.Jz)()||(0,L.vb)(),{checkGate:eh,getDynamicConfig:eg}=(0,U.U)(),eC=eh(n.M5),eN=(0,H.useMemo)(()=>Z??{...(0,p.eO)(e,S),...T?{seatCount:T}:{}},[Z,S,e,T]),ew=eN?.id,{asPath:eb}=(0,z.useRouter)(),ev=(0,O.wb)({prices:eN?.prices??{},forceLocaleCurrency:ea}),{data:eP}=(0,v.$)({shouldFetch:!!ed}),eO=C({asset:t,productName:eN.name}),e_=h||eN.couponCode,ek=(0,_.Rt)({cookies:void 0,signUpView:void 0,queryParams:{landing_page:(0,b.$)({couponCode:e_,productId:ew,vatNumber:j,seatCount:eN?.seatCount,doNotRedirect:!0,asset:es||W?t:void 0,existingUserRedirect:$||em,license:Y,additionalGenerateCheckoutParams:ee,promotions:eN?.promotions}),...q&&{preset:q}}}),eA=(0,H.useCallback)(()=>{window&&(R.A.set(s.uc,eb),window.NREUM?.addPageAction?.("UP3-1623 assign loggedOutHandler authRedirectPath to href",{...window.location||{},asPath:eb,authRedirectPath:ek}),window.location.href=ek)},[eb,ek]),eI=(0,m.Z5)({paymentProfiles:eP}),eE=(0,H.useCallback)(e=>{let t={createTime:en?.createTime,component:"useCreateOrder.js",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateOrder",errorTitle:e.title,impersonatorId:ei?.impersonatorId,msg:"UP1-2650 Order creation failed",organizationId:en?.organizationId,referrerPath:window.location.pathname,referrerQuery:window.location.search,userId:en?.id,username:en?.username,isLicenseDrawer:J};window.NREUM?.noticeError?.(e,t)},[ei,en,J]),eM=(0,P.J)({additionalQueryParams:{...ee,...er&&{checkoutAction:er}},couponCode:e_}),ex=(0,A.h)(),[eU,eS]=(0,H.useState)({status:"",error:void 0}),eD=(0,H.useCallback)(async()=>{try{if(B?.({status:"",error:void 0}),eS({status:"",error:void 0}),ec(!0),eP){let e=t?{assets:[{asset:t,selectedAssetSize:(0,c.aZ)({assetType:(0,f.f0)(t),assetSize:r})}]}:{},s=[];s.push({...e,product:eN,productType:D});let u=eN.name===a.rVp,l=eh(n.gx),p=u&&l?(0,N.l)(d.ju[a.rVp]):void 0,h=(0,y.N)({productNames:[eN.name],config:eg(n.sC)}),g=h?.promotionValue;null!=Q&&null!=X&&s.push({product:{id:F(),type:"products"},cancellationReason:Q,subscriptionIdentifier:X});let{headers:C}=(0,w.H)({trackingId:ef,headers:{[i.DF]:eu}})||{},{data:b}=await (0,m.fS)({country:eo,currency:ep||ev,paymentProfileId:eI?.paymentId,orderItems:s,selectedShadowsOption:G,vatNumber:j,couponCode:e_,promotions:eN?.promotions??g??p,license:Y,debitableIdentifier:ey,configs:{headers:C},isEligibleForUnlimitedBogoPromotion:eO,isClickToCancelARGateEnabled:eC,isFootageSelect:!!t&&(0,f.ex)(t)});ex({actionName:"convert - order creation success",customAttributes:{productName:eN.name,productType:D,country:eo,currency:ep||ev,assetType:(0,f.f0)(t),assetSize:r,license:Y,isLicenseDrawer:J,orderFlow:et,couponCode:e_,orderId:b.id}}),B?.({status:o.qO,error:void 0}),eS({status:o.qO,error:void 0}),ec(!1),eM({orderId:b.id})}ec(!1)}catch(e){B?.({status:o.Nz,error:e}),eS({status:o.Nz,error:e}),ec(!1),e?.detail?.toLowerCase()===u.s_&&V?.(!0),eE(e)}},[B,eP,t,r,eN,D,eh,eg,Q,X,ef,eu,eo,ep,ev,eI?.paymentId,G,j,e_,Y,ey,eO,eC,ex,J,et,eM,eE,V]);return{createOrderHandler:ed?eD:eA,isCreateOrderInProgress:el,product:eN,orderStatus:eU,createOrderHandlerLoading:ed&&!eP}}},762364:(e,t,r)=>{r.d(t,{N:()=>d});var a=r(732580),o=r(639566),s=function(e){return e.PERCENTAGE="percentage",e.FIXED="fixed",e}(s||{});let n=(e,t,r)=>!(r?.length>0&&r.some(t=>e.includes(t)))&&(!(t?.length>0)||t.some(t=>e.includes(t))),i=(e,t)=>n(t.productNames,e.eligibleProducts,e.excludedProducts),d=({productNames:e,config:t})=>{let r=t.get("promotions",[]);if(!r.length)return;let s={productNames:e};for(let e of r)if(i(e,s)){let{promotionTier:t,...r}=e;return{promotionValue:(0,o.l)([{id:t,model:a.h3,namespace:a._7}]),...r}}}},762705:(e,t,r)=>{r.d(t,{J:()=>c});var a=r(213370),o=r(545875),s=r(500306),n=r(623523),i=r(241607),d=r(859478),u=r(330633);let{shutterstockBaseUrl:l}=(0,n.K)(),c=({couponCode:e,displayInlineCancellationFlow:t,additionalQueryParams:r={}})=>{let n=(0,d.useRouter)(),c=(0,o.Q)(),m=!!c?.current?.isPeacock;return(0,u.useCallback)(({orderId:o})=>{let d=(0,i.BF)({language:n.locale,baseUrl:l,pathname:(0,s.DG)({queryParams:{orderId:o,...r,...n?.query||{},...m&&{isCreativeAiOrder:"true"},...e?{[a.m]:e,[a.AW]:e}:{},...t&&{display:"inlineCancellationFlow"}}})});window.location=d},[e,m,n,t,r])}},800626:(e,t,r)=>{r.d(t,{CM:()=>p,FH:()=>C,GA:()=>g,ME:()=>w,YH:()=>b,he:()=>v,jj:()=>N,t_:()=>y,tb:()=>f,zM:()=>h});var a=r(417594),o=r(680904),s=r(977474),n=r(341573),i=r(28071),d=r(737578),u=r(65776),l=r(678540);let c=({licenses:e,selectedPaymentPlan:t})=>e?.some(({product:e})=>e?.name===t?.product?.name),m=({asset:e,licenses:t})=>{let r=i.xu[e.type];return t?.some(({licenseName:e,product:t})=>(e===d.PtZ[r]||e===d.or1[r]||e===d.MQK[r])&&[...o.XqP,...s.Hg,...s.Gn,o.lcL,o.keR,o.rJW].includes(t?.name||""))},p=({asset:e,licenses:t,selectedPaymentPlan:r})=>c({licenses:t,selectedPaymentPlan:r})||m({asset:e,licenses:t}),y=()=>({status:"",message:"",messageKey:""}),f=({licenses:e,licenseTypes:t})=>{let{standard:r,enhanced:a}=t;return e.reduce((e,t)=>{let{licenseName:o}=t;return o===r&&(e.ownsStandardLicense=!0),o===a&&(e.ownsEnhancedLicense=!0),e},{ownsStandardLicense:!1,ownsEnhancedLicense:!1})},h=({subscriptions:e=[],licenseName:t=""})=>e?.some(({license:e,isEligibleForDownload:r})=>e===t&&r),g=(e,t,r)=>(0,u.eO)(e,t[r]),C=({asset:e,ownsStandardLicense:t,ownsEnhancedLicense:r,selectedProductLicenseType:a})=>{let o=i.xu[e.type];return t&&a?.license===d.or1[o]||r&&[d.or1[o],d.PtZ[o]].includes(a?.license||"")},N=({asset:e,selectedPaymentPlan:t,subscriptions:r})=>{let a=i.xu[e.type];return t&&"isPaused"in t?t.isPaused:r?.filter(({license:e})=>e===d.or1[a]||e===d.PtZ[a])?.some(({isPaused:e})=>e)},w=({licenses:e})=>e?.some(({licenseName:e})=>Object.values(d.PtZ).includes(e))??!1,b=(e,t,r)=>(0,l.$9)(e)?d.rTe:[o.ZI1,d.$am].includes(r?.license||"")?d.PtZ[t]:d.or1[t],v=e=>({status:n.Nz,message:e(`${a.sVY}::notifications:label_generic_failure`),messageKey:"notifications:label_generic_failure"})},816243:(e,t,r)=>{r.d(t,{T:()=>c});var a=r(193581),o=r(498590),s=r(712633),n=r(332546),i=r(648903),d=r(946887),u=r(330633);let l={isEligibleForCon64AnonymousCheckoutExperiment:!1},c=({disableEntryPoint:e=!0}={})=>{let{getExperiment:t}=(0,i.U)(),r=(0,s.i9)(),{anonymousId:c}=(0,n.pn)();return(0,u.useCallback)(()=>{let s=d.A.get(a.g_),n=d.A.get(a.N_),i=d.A.get(a.SG);if(r||e)return l;let u=e=>window.NREUM?.addPageAction(e,{anonymousIdDataLayer:c,anonymousIdCookie:s,wasLoggedIn:n,hasAccountSharedBefore:!!i});if(!s||s!==c)return u("CON-64 - Exclude anonymous users who have a rotating anonymous id"),l;if(n||i)return u("CON-64 - Exclude anonymous users who have previously logged-in"),l;let m=t(o.f.signUpOnCheckout);return{isEligibleForCon64AnonymousCheckoutExperiment:1===Number(m?.get("variant",0))}},[r,e,c,t])}},964105:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>b});var a=r(424629),o=r(33301),s=r(558132),n=r(341573),i=r(213370),d=r(428507),u=r(800626),l=r(417594),c=r(895620);let m=({price:e,resolution:t})=>{let{t:r}=(0,c.Bd)(l.sVY);return r("video_otp_primary_cta_dynamic_label",{PRICE:e,RESOLUTION:t?.toUpperCase()})};var p=r(816243),y=r(729727),f=r(864983),h=r(656740),g=r(438704),C=r(712633),N=r(82708),w=r(330633);let b=({asset:e,assetSizeStateId:t,assetType:r,buttonConfig:l={showIcon:!0,variant:"contained",color:"secondary",style:{marginBottom:"8px"}},clickAnalyticsLabel:c,clickAnalyticsLabelMap:b,label:v,orderFlow:P=f.Y.UNLIMITED_CONVERSION_PANEL,product:O,productStateId:_,setStateOnLoggedOutClick:k,termsCheckboxStateId:A,shouldUseSignupModal:I=!0,showDynamicLabelForOtpCta:E=!1,dataAutomation:M,statusOnWarning:x,resetState:U={StatusMessage:(0,u.t_)()}})=>{let S=(0,C.i9)(),{setStates:D}=(0,d.h6)(),F=(0,d.Cw)(t),L=(0,d.Cw)(A??"")??!0,R=(0,d.Cw)(_??"")??O,z=(0,u.YH)(e,r,R),H=(0,g.Up)({product:R}),Z=m({resolution:F?.resolution,price:H}),T=(0,p.T)({disableEntryPoint:!1}),B=(0,y.o)({disableEntryPoint:!1}),V={orderFlow:P,productType:i.PZ,asset:e,productOverride:R,shouldForceAsset:!0,assetSize:F,license:z},{getCreateOrderHandler:j,isCreateOrderInProgress:Y,createOrderHandlerLoading:J,orderStatus:q}=(0,h.X)(V),K=x&&q===n.Nz;(0,w.useEffect)(()=>{K&&D({...x})},[K,D,x]);let $=Y||J||!L,G=E?Z:v;return(0,a.jsxs)(s.$n,{"aria-label":G,disabled:$,fullWidth:!0,onClick:()=>{K&&D({...U});let{isEligibleForCon64AnonymousCheckoutExperiment:e}=T();B();let{createOrderHandler:t}=j({isEligibleForAnonCheckout:e});S||!I||e?t():D(k)},labelTrack:b?.[R?.name||""]||c,variant:l.variant,color:l.color,style:l.style,"data-automation":M,children:[Y&&(0,a.jsx)(o.A,{color:"inherit",size:24,style:{position:"absolute"}}),l.showIcon&&(0,a.jsx)(N.Download,{style:{padding:"2px",marginRight:"4px"}}),G]})}}}]);
//# sourceMappingURL=64105.86043a483d66da90.js.map